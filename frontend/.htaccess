<IfModule mod_expires.c>
  ExpiresActive On

  # -----------------------------
  # HTML: short cache to allow quick updates
  # -----------------------------
  ExpiresByType text/html "access plus 5 minutes"

  # -----------------------------
  # CSS and JS: long cache + immutable
  # -----------------------------
  ExpiresByType text/css "access plus 1 year"
  ExpiresByType application/javascript "access plus 1 year"
  ExpiresByType text/javascript "access plus 1 year"

  # -----------------------------
  # Images: long cache + immutable
  # -----------------------------
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType image/x-icon "access plus 1 year"

  # -----------------------------
  # Fonts: long cache + immutable
  # -----------------------------
  ExpiresByType font/woff2 "access plus 1 year"
  ExpiresByType font/woff "access plus 1 year"
  ExpiresByType application/font-woff2 "access plus 1 year"
  ExpiresByType application/font-woff "access plus 1 year"
</IfModule>

<IfModule mod_headers.c>
  # -----------------------------
  # Cache-Control for CSS, JS, images, fonts
  # -----------------------------
  <FilesMatch "\.(js|css|png|jpg|jpeg|gif|svg|webp|woff|woff2)$">
    Header set Cache-Control "public, max-age=31536000, immutable"
  </FilesMatch>

  # -----------------------------
  # Cache-Control for HTML: short cache
  # -----------------------------
  <FilesMatch "\.(html|htm)$">
    Header set Cache-Control "public, max-age=300"
  </FilesMatch>
</IfModule>

# -----------------------------
# SPA React Router: redirect all requests to index.html
# -----------------------------
RewriteEngine On
RewriteBase /

# Ignore existing files and directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Redirect everything else to index.html
RewriteRule . /index.html [L]
